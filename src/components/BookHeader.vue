<template>
  <div class="header">
    <div class="nav">
      <div class="center">
        <!-- logo -->
      <div class="brand">
        <a class="logo" href="#"><img src="../assets/logo.png" alt=""></a>
      </div>

      <!-- 菜单栏 -->
      <div class="collapse">
        <ul class="navbar-nav">
          <li class="menu-category"
            v-for="(item,index) in HmenuItems" :key="index"
            :class="{active: index == HcurrentActiveIndex || item.isHovered}"
            @mouseenter="setHovered(index,true)"
            @mouseleave="setHovered(index,false)"
            @click="setActive(index)"        
           >
           <a href="#" :class="{'a-night': HisNight,'a-night-active':HisNight}">{{ item.label }}</a>

          </li>
        </ul>
      </div>

      <!-- right -->
      <!-- svg头像搜索 -->
      <div class="right">
        <ul class="list-inline">
          <li class="avatar"
            @mouseenter="setVisibility(true)"
            @mouseleave="setVisibility(false)"
          >
            <a href="" class="btn">
              <img src="../assets/avatar.png" alt=""
              :class="[isVisible?'img-enter':'image-leave']"
              >
            </a>
          </li>
          <!-- 竖线 -->
          <div class="divider"></div>
          <!-- 搜索 -->
          <li class="icon-search">
            <a href="#" class="btn"
            @click.prevent="changeSearchTitleState(true)"
            >
                <svg t="1716737231370" :class="{'search-day':HisNight,'search-night':!HisNight}" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4252"><path d="M888.68161 857.569677l-175.091014-175.091014a21.331751 21.331751 0 0 0-30.163096 0c-0.85327 0.85327-1.279905 1.919858-1.919858 2.858454-100.98451 98.382037-259.650076 112.162348-377.699987 32.338935C166.175196 624.669617 129.228603 438.059457 221.424431 301.621576A295.444755 295.444755 0 0 1 357.307687 192.061702a301.716289 301.716289 0 0 1 280.811173 30.632395 301.716289 301.716289 0 0 1 133.238118 248.941537 294.719475 294.719475 0 0 1-22.355675 114.082205 21.331751 21.331751 0 0 0 39.421076 16.297458 336.572371 336.572371 0 0 0 25.598102-130.550317 344.337128 344.337128 0 0 0-152.01006-284.138927A344.294465 344.294465 0 0 0 341.522191 152.512635 337.681622 337.681622 0 0 0 186.056388 277.772679c-105.378851 155.935101-63.227311 369.167287 93.859705 475.271417a344.635773 344.635773 0 0 0 193.180339 59.046287 341.180029 341.180029 0 0 0 225.177966-84.601725l160.244116 160.244115a21.246424 21.246424 0 0 0 30.163096 0 21.331751 21.331751 0 0 0 0-30.163096"  p-id="4253"></path></svg>
            </a>
          </li>
          <!-- 黑夜模式 -->
          <!-- 黑夜模式 -->
          <div class="day-night-container">
            <div class="day-night">
            <li class="icon-night" @click.prevent="toggleDayOrNight(true)">
            <a href="#" class="btn">
              <svg t="1716812549634" :class="{'night-click':HisNight,'night':!HisNight}" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15516"><path d="M238.933333 529.066667A290.133333 290.133333 0 0 1 529.066667 238.933333a290.133333 290.133333 0 0 1 290.133333 290.133334 290.133333 290.133333 0 0 1-290.133333 290.133333A290.133333 290.133333 0 0 1 238.933333 529.066667z m34.133334 0a256.273067 256.273067 0 0 0 256 256 256.3072 256.3072 0 0 0 256-256A256.273067 256.273067 0 0 0 529.066667 273.066667a256.2048 256.2048 0 0 0-255.965867 256z m34.133333-5.256534a229.546667 229.546667 0 0 1 136.840533-208.6912 235.52 235.52 0 0 0-36.590933 188.757334 262.280533 262.280533 0 0 0 296.96 186.811733 237.806933 237.806933 0 0 1-161.928533 63.419733A232.823467 232.823467 0 0 1 307.2 523.844267z" fill="#333333" p-id="15517" :class="{'night-active':isNight}"></path></svg>
            </a>
          </li>
          <li class="icon-day" @click.prevent="toggleDayOrNight(false)">
            <a href="#" class="btn">
              <svg t="1716813112254" :class="{'day-click':!HisNight,'day':HisNight}"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17439" ><path d="M512.001821 1023.998786c-69.112352 0-136.165925-13.53866-199.299806-40.242098-60.971919-25.788155-115.725013-62.702945-162.739475-109.718621-47.015676-47.014463-83.930466-101.767557-109.718621-162.739475C13.540481 648.165925 0.000607 581.112352 0.000607 512.001214 0.000607 442.890075 13.540481 375.835289 40.243919 312.701408c25.788155-60.971919 62.702945-115.725013 109.718621-162.739475 47.014463-47.015676 101.76877-83.930466 162.739475-109.718621C375.835895 13.539874 442.890682 0 512.001821 0c69.111139 0 136.164711 13.539874 199.297378 40.243312 60.971919 25.788155 115.723799 62.702945 162.739475 109.718621 47.014463 47.014463 83.930466 101.76877 109.718621 162.739475 26.703438 63.13388 40.242098 130.188667 40.242098 199.299806 0 69.111139-13.53866 136.164711-40.242098 199.297378-25.788155 60.971919-62.702945 115.723799-109.718621 162.739475s-101.767557 83.930466-162.739475 109.718621c-63.132666 26.702224-130.186239 40.242098-199.297378 40.242098z m0-987.581697C249.763573 36.417089 36.417696 249.762966 36.417696 512.001214c0 262.234606 213.345877 475.579269 475.584125 475.579269 262.234606 0 475.579269-213.344663 475.579269-475.579269C987.582304 249.762966 774.23764 36.417089 512.001821 36.417089z" p-id="17440" class="svg-white-night"></path><path d="M689.629816 280.809749c15.486974-15.462696 40.623263-15.462696 56.110238 0 15.501541 15.467552 15.501541 40.546787 0 56.020409-15.486974 15.467552-40.623263 15.467552-56.110238 0-15.495472-15.473621-15.500327-40.552857 0-56.020409zM513.210868 183.232586c22.608943 0 40.944948 18.303229 40.944948 40.869685 0 22.576168-18.336005 40.879397-40.944948 40.879397-22.608943 0-40.949803-18.303229-40.949803-40.879397 0-22.566456 18.34086-40.869686 40.949803-40.869685zM280.559078 280.52084c7.340471-7.325904 17.668358-11.598843 28.052084-11.598843 10.389796 0 20.712827 4.272938 28.063009 11.598843 7.344113 7.340471 11.621907 17.639224 11.621908 28.014453 0 10.365518-4.277794 20.673982-11.621908 28.009598-7.350183 7.325904-17.673214 11.598843-28.063009 11.598843-10.383726 0-20.711613-4.272938-28.052084-11.598843-7.350183-7.335616-11.621907-17.64408-11.621907-28.009598 0-10.375229 4.271725-20.673982 11.621907-28.014453zM223.75206 552.254237c-22.613799 0-40.944948-17.738764-40.944947-39.613296s18.331149-39.607227 40.944947-39.607227c22.608943 0 40.946162 17.733909 40.946162 39.607227s-18.337218 39.613296-40.946162 39.613296zM336.384049 744.876362c-15.500327 15.472407-40.613552 15.472407-56.109024 0-15.496685-15.462696-15.496685-40.541932 0-56.015553 15.495472-15.462696 40.613552-15.462696 56.109024 0 15.496685 15.473621 15.496685 40.552857 0 56.015553zM512.802997 841.197136c-21.910949 0-39.680061-17.729053-39.680061-39.60844 0-21.874532 17.767898-39.60844 39.680061-39.608441 21.912163 0 39.675205 17.733909 39.680061 39.608441 0 21.873318-17.763042 39.60844-39.680061 39.60844zM513.002077 726.344919c-118.123685 0-213.87878-95.585149-213.87878-213.495187 0-117.91975 95.756309-213.503684 213.87878-213.503684 118.128541 0 213.883636 95.585149 213.883636 213.503684 0.001214 117.910038-95.755095 213.495187-213.883636 213.495187zM746.347006 745.160415c-15.984674 15.477263-41.912428 15.477263-57.901959 0-15.98953-15.457841-15.98953-40.551643 0-56.005842 15.979819-15.472407 41.912428-15.472407 57.901959 0 15.999241 15.459054 15.994386 40.548001 0 56.005842zM802.263019 552.653611c-21.912163 0-39.675205-17.738764-39.675205-39.603585 0-21.869676 17.763042-39.603585 39.675205-39.612082 21.912163 0 39.675205 17.738764 39.68006 39.612082-0.001214 21.863607-17.764256 39.603585-39.68006 39.603585z" p-id="17441" :class="{'svg-white-night': HisNight}"></path></svg>
            </a>
          </li>
          </div>
          </div>
        </ul>

          <!-- avatar悬浮下面的登录、注册和找回密码 -->
        
        <ul :class="[HisVisible ? 'visible' : 'sub-menu']"
          @mouseenter="setVisibility(true)"
          @mouseleave="setVisibility(false)"
          
        >
          <div class="padding-10">
            <div class="sub-user-box">
              <div class="text-center">
                <div class="jsa">
                  <a href="#" class="signin-loader"
                  @click.prevent="changeSignInState(true)"
                  >
                    <div class="jsa-svg">
                      <svg t="1716810321289" class="icon icon-login" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11639" width="200" height="200"><path d="M575.215 547.318c53.367-24.316 90.562-78.011 90.562-140.522 0-85.257-69.149-154.383-154.406-154.383-85.299 0-154.427 69.126-154.427 154.383 0 62.49 37.172 116.185 90.562 140.522-87.156 27.24-150.586 108.698-150.586 204.715 0 12.071 9.779 21.827 21.827 21.827s21.827-9.756 21.827-21.827c0-94.161 76.613-170.774 170.776-170.774 94.184 0 170.797 76.613 170.797 170.774 0 12.071 9.756 21.827 21.827 21.827 12.07 0 21.827-9.756 21.827-21.827 0.021-95.994-63.43-177.475-150.586-204.715zM400.621 406.817c0-61.072 49.678-110.729 110.773-110.729 61.072 0 110.75 49.657 110.75 110.729 0 61.094-49.678 110.794-110.75 110.794-61.095 0-110.773-49.7-110.773-110.794z" p-id="11640"></path><path d="M511.371 960.81c-246.951 0-447.869-200.918-447.869-447.891 0-246.93 200.919-447.871 447.869-447.871 246.973 0 447.892 200.919 447.892 447.871 0 246.973-200.919 447.891-447.892 447.891z m0-854.269c-224.098 0-406.398 182.301-406.398 406.377s182.3 406.397 406.398 406.397c224.099 0 406.42-182.321 406.42-406.397S735.47 106.541 511.371 106.541z" p-id="11641"></path></svg>
                    </div>
                    <div class="jsa-font jsa-font-login">登录</div>
                  </a>
                  <a href="#" class="signup-loader"
                  @click.prevent="changeSignUpState(true)"
                  >
                    <div class="jsa-svg">
                      <svg t="1716810399847" class="icon-register" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13504" width="200" height="200"><path d="M512.442 959.907h-0.022c-107.338-0.113-211.152-38.905-292.312-109.224-98.39-84.88-154.919-208.135-155.048-338.135 0-246.716 200.712-447.419 447.413-447.419 246.724 0 447.442 200.703 447.442 447.397-0.158 130.028-56.711 253.285-155.153 338.188-81.395 70.409-185.225 109.193-292.32 109.193z m0.031-848.228c-221.039 0-400.862 179.822-400.862 400.847 0.113 116.445 50.756 226.866 138.947 302.942 72.751 63.037 165.752 97.79 261.907 97.889 95.913-0.008 188.907-34.761 261.87-97.866 88.221-76.099 138.885-186.52 139.029-302.996 0-220.994-179.837-400.816-400.891-400.816z" p-id="13505"></path><path d="M767.174 745.203H257.801v-20.859c0-98.276 55.87-186.126 142.167-228.456-26.708-28.321-41.944-65.826-41.944-105.603 0-85.175 69.287-154.47 154.448-154.47 85.175 0 154.479 69.295 154.479 154.47 0 39.778-15.237 77.282-41.945 105.603 86.298 42.33 142.167 130.18 142.167 228.456v20.859z m-466.649-41.717H724.45c-8.129-83.547-64.643-154.979-145.75-181.49l-41.383-13.532 36.472-23.767c32.216-21.002 51.446-56.294 51.446-94.412 0-62.173-50.582-112.754-112.763-112.754-62.159 0-112.731 50.582-112.731 112.754 0 38.119 19.229 73.41 51.445 94.412l36.474 23.767-41.383 13.532c-81.109 26.51-137.623 97.942-145.752 181.49z"  p-id="13506"></path></svg>
                    </div>
                    <div class="jsa-font jsa-font-register">注册</div>
                    </a>
                  <a href="#" class="find-loader">
                    <div class="jsa-svg">
                      <svg t="1716807467642" class="icon-find" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3279" width="200" height="200"><path d="M611.52 568.853333H412.48a14.24 14.24 0 1 0 0 28.48h199.04a14.24 14.24 0 1 0 0-28.48zM611.52 654.186667H412.48a14.24 14.24 0 1 0 0 28.48h199.04a14.24 14.24 0 1 0 0-28.48z" p-id="3280"></path><path d="M512 0C229.226667 0 0 229.226667 0 512s229.226667 512 512 512 512-229.226667 512-512S794.773333 0 512 0z m199.146667 739.52a56.853333 56.853333 0 0 1-56.853334 56.853333H369.813333a56.853333 56.853333 0 0 1-56.853333-56.853333V512a56.853333 56.853333 0 0 1 56.853333-56.853333v-85.333334a142.24 142.24 0 1 1 284.48 0H597.333333a85.333333 85.333333 0 1 0-170.666666 0v85.333334h227.52a56.853333 56.853333 0 0 1 56.96 56.853333z" p-id="3281"></path></svg>
                    </div>
                    <div class="jsa-font jsa-font-findPassword">找回密码</div>
                    </a>
                </div>
              </div>
            </div>
          </div>

        </ul>
      </div>
      </div>
    </div>
  </div>
  
</template>

<script>

  export default{
    props: ['currentActiveIndex', 'isNight', 'isVisible', 'menuItems'],

    data(){
      return{
        HisVisible:this.isVisible,
        HisNight:this.isNight,
        HcurrentActiveIndex:this.currentActiveIndex,
        HmenuItems:this.menuItems
      }
    },
    methods:{
      setHovered(index,isHovered){
        this.$set(this.HmenuItems,index,{...this.HmenuItems[index],isHovered})
        this.$emit('update:menuItems', { index, isHovered });
      },
      setActive(index){
        this.HcurrentActiveIndex=index
        this.$emit('update:currentActiveIndex',index)
      },
      setVisibility(state){
        this.HisVisible=state
        this.$emit('update:isVisible',state)
      },
      toggleDayOrNight(state){
        this.HisNight=state
        this.$emit('update:isNight',state)
        // const header=document.querySelector('.header')
        // const subMenu=document.querySelector('.sub-menu')
        // const visible=document.querySelector('.visible')
        const root = document.documentElement;
    
      
        if(state){
          // header.style.backgroundColor='#37383a'
          // subMenu.style.backgroundColor='#37383a'
          root.style.setProperty('--main-bg-color', '#37383a');
          root.style.setProperty('--main-font-color', '#fff');
          root.style.setProperty('--book-body-content','#B4B6BB')
          root.style.setProperty('--book-body-nameAndTime','#888a8f')
          root.style.setProperty('--sign-line','rgba(114, 114, 114, 0.1)')
          root.style.setProperty('--input-caret-color','#fff')
          
         
        }
        else{
          // header.style.backgroundColor='#fff'
          // subMenu.style.backgroundColor='#fff'
          root.style.setProperty('--main-bg-color', '#fff');
          root.style.setProperty('--main-font-color', '#37383a');
          root.style.setProperty('--book-body-content','#777')
          root.style.setProperty('--book-body-nameAndTime','#999')
          root.style.setProperty('--input-caret-color','#333')
          
        }

      },
      changeSignInState(state){
        this.$emit('update:isSignIn',state)
      },
      changeSignUpState(state){
        this.$emit('update:isSignUp',state)
      },
      changeSearchTitleState(state){
        this.$emit('update:isSearchTitle',state)
      }
    },
   
  }
</script>

<style>
@import url(../css/BookHeader.css);
</style>
